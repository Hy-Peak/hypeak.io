import{d as T,a1 as j,z,D as a,o as u,c as y,n as H,k as t,I as o,w as n,a2 as k,a3 as U,m as D,a as _,b as S,e as E,F as P,p as B,q as V,_ as N}from"./chunks/framework.Q4V_htdG.js";import{m as Z,C as A}from"./chunks/index.bjcL21W4.js";const $="/hypeak.io/assets/webstorm.oMCHIk8P.png",v=g=>(B("data-v-52efb3d7"),g=g(),V(),g),G=v(()=>t("use",{"xlink:href":"#webstorm"},null,-1)),q=v(()=>t("symbol",{id:"webstorm",fill:"none",viewBox:"0 0 70 70",xmlns:"http://www.w3.org/2000/svg"},[t("defs",null,[t("linearGradient",{id:"webstorm_webstorm_svg__a",gradientUnits:"userSpaceOnUse",x1:"25.068",x2:"43.183",y1:"1.46",y2:"66.675"},[t("stop",{offset:".285","stop-color":"#07C3F2"}),t("stop",{offset:".941","stop-color":"#087CFA"})]),t("linearGradient",{id:"webstorm_webstorm_svg__b",gradientUnits:"userSpaceOnUse",x1:"30.72",x2:"61.365",y1:"9.734",y2:"54.671"},[t("stop",{offset:".14","stop-color":"#FCF84A"}),t("stop",{offset:".366","stop-color":"#07C3F2"})]),t("linearGradient",{id:"webstorm_webstorm_svg__c",gradientUnits:"userSpaceOnUse",x1:"61.082",x2:"65.106",y1:"15.29",y2:"29.544"},[t("stop",{offset:".285","stop-color":"#07C3F2"}),t("stop",{offset:".941","stop-color":"#087CFA"})])]),t("path",{d:"M9.406 63.292 0 7.365 17.427.073l11.156 6.635L38.792 1.24l21.291 8.166L48.125 70 9.406 63.292Z",fill:"url(#webstorm_webstorm_svg__a)"}),t("path",{d:"M70 23.698 60.958 1.385 44.552 0 19.25 24.281l6.854 31.354 12.688 8.896L70 46.011l-7.656-14.292L70 23.698Z",fill:"url(#webstorm_webstorm_svg__b)"}),t("path",{d:"m56 20.344 6.344 11.375L70 23.698 64.385 9.844 56 20.344Z",fill:"url(#webstorm_webstorm_svg__c)"}),t("path",{d:"M56 14H14v42h42V14Z",fill:"#000"}),t("path",{d:"M34.417 48.65h-15.75v2.683h15.75V48.65ZM34.16 19.25l-2.38 9.17-2.66-9.17h-2.66l-2.66 9.17-2.38-9.17h-3.64L22.26 35h2.94l2.59-9.1 2.52 9.1h3.01l4.48-15.75h-3.64ZM38.5 32.76l2.03-2.45c1.4 1.19 2.94 1.89 4.69 1.89 1.4 0 2.31-.56 2.31-1.47v-.07c0-.91-.56-1.33-3.15-2.03-3.15-.84-5.25-1.68-5.25-4.83v-.07c0-2.87 2.31-4.76 5.53-4.76 2.31 0 4.27.7 5.88 2.03l-1.82 2.59c-1.4-.98-2.8-1.54-4.13-1.54s-2.03.63-2.03 1.4v.07c0 1.05.7 1.4 3.43 2.1 3.22.84 5.04 1.96 5.04 4.76v.07c0 3.15-2.38 4.9-5.81 4.9-2.45-.07-4.83-.91-6.72-2.59Z",fill:"#FFF"})],-1)),X=[G,q],J=v(()=>t("div",{style:{"min-width":"100px","text-align":"center"}},"--->",-1)),K=v(()=>t("img",{alt:"webstorm",src:$},null,-1)),Q={style:{"min-height":"150px"}},W={class:"exhibitArea"},Y={class:"exhibitArea"},ee={class:"exhibitArea"},te=v(()=>t("div",{class:"successTitle"},"转换成功",-1)),oe="/hypeak.io/tool/assets/img/",ne=T({__name:"hyExportSvg",setup(g){console.log(oe);const e=j({current:0,svgDomCode:"",conversion:{height:200,width:200},display:!0,pngUrl:""}),L=[{title:"填写Svg代码"},{title:"设置属性"},{title:"下载"}];z(()=>{e.current===0?e.display=!e.svgDomCode:e.current===1&&(e.display=!e.conversion.height&&!e.conversion.width)});const h=()=>{if(e.current===4){e.current=3;return}e.current--},b=()=>{e.current!==2&&e.current++},I=()=>{e.current=0,e.conversion={height:200,width:200},e.pngUrl="",e.svgDomCode=""},F=()=>{let l;try{l=document.createElementNS("http://www.w3.org/2000/svg","svg"),l.innerHTML=e.svgDomCode.replace(/<svg[^>]*>/,"").replace(/<\/svg>/,"")}catch{Z.error("svg代码有误");return}M(l,e.conversion.width,e.conversion.height,s=>{e.pngUrl=s;const c=document.createElement("a");c.href=s,c.download="svg.png",c.click()})},M=(l,s,c,x)=>{const d=document.createElement("canvas");d.width=s,d.height=c;const f=d.getContext("2d"),w=new XMLSerializer().serializeToString(l),C=new Blob([w],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(C),i=new Image;i.onload=function(){f.drawImage(i,0,0),URL.revokeObjectURL(r);const m=d.toDataURL("image/png");x(m)},i.src=r},O=()=>{if(e.current!==0)return;const l=document.getElementById("svg"),s=l==null?void 0:l.outerHTML;e.svgDomCode=s||""};return(l,s)=>{const c=a("a-tooltip"),x=a("a-steps"),d=a("a-textarea"),f=a("a-input-number"),w=a("a-form-item"),C=a("a-form"),r=a("a-col"),i=a("a-row"),m=a("a-button"),R=a("a-card");return u(),y(P,null,[(u(),y("div",{key:0,class:H(l.$style.icons)},[t("div",null,[o(c,{title:"svg"},{default:n(()=>[(u(),y("svg",{id:"svg",onClick:O},X))]),_:1})]),J,t("div",null,[o(c,{title:"png"},{default:n(()=>[K]),_:1})])],2)),o(i,null,{default:n(()=>[o(r,{span:24},{default:n(()=>[o(R,{hoverable:"",title:"例子"},{default:n(()=>[o(x,{current:e.current,items:L,size:"small",style:{"margin-bottom":"1rem"}},null,8,["current"]),t("div",Q,[k(t("div",W,[o(d,{value:e.svgDomCode,"onUpdate:value":s[0]||(s[0]=p=>e.svgDomCode=p),placeholder:"点击左上角的图标,获取示例代码",style:{height:"150px",resize:"none"}},null,8,["value"])],512),[[U,e.current===0]]),k(t("div",Y,[o(C,{"label-col":{span:3}},{default:n(()=>[o(w,{label:"width"},{default:n(()=>[o(f,{value:e.conversion.width,"onUpdate:value":s[1]||(s[1]=p=>e.conversion.width=p),min:0,max:1e3,step:1,style:{width:"100%"}},null,8,["value"])]),_:1}),o(w,{label:"height"},{default:n(()=>[o(f,{value:e.conversion.height,"onUpdate:value":s[2]||(s[2]=p=>e.conversion.height=p),min:0,max:1e3,step:1,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})],512),[[U,e.current===1]]),k(t("div",ee,[o(i,{justify:"center",style:{"margin-top":"3rem"}},{default:n(()=>[o(r,null,{default:n(()=>[o(D(A),{style:{"font-size":"3.5rem",color:"#96ce24"}})]),_:1})]),_:1}),te,o(i,{gutter:15,justify:"center",style:{"margin-top":"1rem"}},{default:n(()=>[o(r,null,{default:n(()=>[o(m,{type:"primary",onClick:F},{default:n(()=>[_("下载")]),_:1})]),_:1}),o(r,null,{default:n(()=>[o(m,{onClick:I},{default:n(()=>[_("再来一个")]),_:1})]),_:1})]),_:1})],512),[[U,e.current===2]])]),o(i,{gutter:15,justify:"end",style:{"margin-top":"1rem"}},{default:n(()=>[o(r,null,{default:n(()=>[e.current!==0?(u(),S(m,{key:0,onClick:h},{default:n(()=>[_("PREVIOUS")]),_:1})):E("",!0)]),_:1}),o(r,null,{default:n(()=>[e.current<2?(u(),S(m,{key:0,disabled:e.display,type:"primary",onClick:b},{default:n(()=>[_("NEXT")]),_:1},8,["disabled"])):E("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}}),se="_icons_2ceu5_1",ae={icons:se},le={$style:ae},re=N(ne,[["__cssModules",le],["__scopeId","data-v-52efb3d7"]]),ce=` /**
     * 把 svg 转换 png
     * @param svgElement
     * @param width
     * @param height
     */
    function convertSvgToPng(svgElement, width, height, callback) {
        const canvas = document.createElement('canvas');
        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext('2d');

        // 将 SVG 转换成 DataURL
        const data = new XMLSerializer().serializeToString(svgElement);
        const svg = new Blob([data], {type: 'image/svg+xml;charset=utf-8'});
        const url = URL.createObjectURL(svg);

        const img = new Image();
        img.onload = function () {
            ctx.drawImage(img, 0, 0);
            URL.revokeObjectURL(url);
            const png = canvas.toDataURL('image/png');
            callback(png);
        };
        img.src = url;
    }

    document.querySelector('#app').addEventListener('click', starts)

    function starts() {
        const svg = document.querySelector('svg');
        convertSvgToPng(svg, 2000, 2000, function (png) {
            const img = document.createElement('img');
            // 缩小
            img.src = png;
            img.style.width = '100px'
            img.style.height = '100px'
            document.body.appendChild(img);
        });
    }`,ie=t("h1",{id:"svg下载",tabindex:"-1"},[_("svg下载 "),t("a",{class:"header-anchor",href:"#svg下载","aria-label":'Permalink to "svg下载"'},"​")],-1),de=t("p",null,"在逛各种站点时. 看到了好看的图标想保存(收藏嗷). 但是发现没有链接的时候 😁",-1),ge=JSON.parse('{"title":"Hy-工具类","description":"","frontmatter":{"title":"Hy-工具类"},"headers":[],"relativePath":"tool/index.md","filePath":"tool/index.md"}'),me={name:"tool/index.md"},pe=Object.assign(me,{setup(g){return(e,L)=>{const h=a("ClientOnly"),b=a("hyCode");return u(),y("div",null,[ie,de,o(h,null,{default:n(()=>[o(re)]),_:1}),_(" ----- 整理下思路: * 通过js获取svg的内容 * 通过canvas转换成png * 通过a标签下载 "),o(h,null,{default:n(()=>[o(b,{code:D(ce)},null,8,["code"])]),_:1})])}}});export{ge as __pageData,pe as default};
